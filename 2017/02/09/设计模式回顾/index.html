<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"sortbylist.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="设计模式分类创建型模式（5） 工厂方法模式 ( Factory Method )  抽象工厂模式 ( Abstract Factory )  单例模式 ( Singleton )  建造者模式 ( Builder )  原型模式 ( Prototype )  结构型模式（7） 适配器模式 ( Adapter )  装饰器模式 ( Decorator )  代理模式 ( Proxy )  外观模式">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式回顾">
<meta property="og:url" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/index.html">
<meta property="og:site_name" content="书生小栈">
<meta property="og:description" content="设计模式分类创建型模式（5） 工厂方法模式 ( Factory Method )  抽象工厂模式 ( Abstract Factory )  单例模式 ( Singleton )  建造者模式 ( Builder )  原型模式 ( Prototype )  结构型模式（7） 适配器模式 ( Adapter )  装饰器模式 ( Decorator )  代理模式 ( Proxy )  外观模式">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112239173.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112327842.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112454914.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112530291.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112543824.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112600851.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/v2-aecdd95efaeb6cfb30a81ae0fb9efe8d_720w.jpg">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113326883.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113239659.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113440837.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113507478.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113541987.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113616818.png">
<meta property="og:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113639953.png">
<meta property="article:published_time" content="2017-02-09T03:41:02.000Z">
<meta property="article:modified_time" content="2025-02-10T07:24:32.962Z">
<meta property="article:author" content="Jerry Lee">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112239173.png">

<link rel="canonical" href="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>设计模式回顾 | 书生小栈</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">书生小栈</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://sortbylist.github.io/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Jerry Lee">
      <meta itemprop="description" content="Java coder">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="书生小栈">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          设计模式回顾
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-02-09 11:41:02" itemprop="dateCreated datePublished" datetime="2017-02-09T11:41:02+08:00">2017-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-02-10 15:24:32" itemprop="dateModified" datetime="2025-02-10T15:24:32+08:00">2025-02-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><h5 id="创建型模式（5）"><a href="#创建型模式（5）" class="headerlink" title="创建型模式（5）"></a>创建型模式（5）</h5><ul>
<li>工厂方法模式 ( Factory Method ) </li>
<li>抽象工厂模式 ( Abstract Factory ) </li>
<li>单例模式 ( Singleton ) </li>
<li>建造者模式 ( Builder ) </li>
<li>原型模式 ( Prototype )</li>
</ul>
<h5 id="结构型模式（7）"><a href="#结构型模式（7）" class="headerlink" title="结构型模式（7）"></a>结构型模式（7）</h5><ul>
<li>适配器模式 ( Adapter ) </li>
<li>装饰器模式 ( Decorator ) </li>
<li>代理模式 ( Proxy ) </li>
<li>外观模式 ( Facade ) </li>
<li>桥接模式 ( Bridge ) </li>
<li>组合模式 ( Composite ) </li>
<li>享元模式 ( Flyweight )</li>
</ul>
<h5 id="行为型模式（11）"><a href="#行为型模式（11）" class="headerlink" title="行为型模式（11）"></a>行为型模式（11）</h5><ul>
<li>策略模式 ( Strategy ) </li>
<li>模板方法模式 ( Template Method ) </li>
<li>观察者模式 ( Observer ) </li>
<li>迭代器模式 ( Iterator ) </li>
<li>责任链模式 ( Chain of Responsibility ) </li>
<li>命令模式 ( Command ) </li>
<li>备忘录模式 ( Memento ) </li>
<li>中介者模式 ( Mediator ) </li>
<li>解释器模式 ( Interpreter ) </li>
<li>访问者模式 ( Visitor ) </li>
<li>状态模式 ( State )</li>
</ul>
<h4 id="七大原则"><a href="#七大原则" class="headerlink" title="七大原则"></a>七大原则</h4><ul>
<li><p>单一职责原则(Single Responsibility Principle)</p>
<p>单一职责原则表示一个模块的组成元素之间的功能相关性。从软件变化的角度来看，就一个类而言，应该仅有一个让它变化的原因；通俗地说，即一个类只负责一项职责。</p>
</li>
<li><p>开闭原则（ Open Close principle ) </p>
<blockquote>
<p>开闭原则就是说<strong>对扩展开放，对修改关闭</strong>。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类。</p>
</blockquote>
</li>
<li><p>里氏替换原则 ( Liskov Substitution Principle ) </p>
<blockquote>
<p>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP 是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</p>
</blockquote>
</li>
<li><p>依赖倒转原则 ( Dependence Inversion Principle ) </p>
<p>这个是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。</p>
</li>
<li><p>接口隔离原则 ( Interface Segregation Principle ) </p>
<p>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还有一个降低类之间的耦合度的意思。</p>
</li>
<li><p>迪米特法则 （最少知道原则 )  ( Demeter Principle ) </p>
<p>一个实体应当尽量少的与其他实体之间发生相互作用，使系统功能模块相对独立。</p>
</li>
<li><p>合成复用原则 ( Composite Reuse Principle ) </p>
<p>尽量使用合成&#x2F;聚合的方式，而不是使用继承。</p>
</li>
</ul>
<h4 id="简单（4）"><a href="#简单（4）" class="headerlink" title="简单（4）"></a>简单（4）</h4><ul>
<li>工厂方法  factory类-&gt;静态方法</li>
<li>抽象工厂  多个factory类 </li>
<li>单例      懒汉&#x2F;饿汉&#x2F;双重检查</li>
<li>建造者    builder</li>
</ul>
<h4 id="有用的（12）"><a href="#有用的（12）" class="headerlink" title="有用的（12）"></a>有用的（12）</h4><ul>
<li>适配器 adapter</li>
<li>装饰器 decorator|wrapper</li>
<li>代理  proxy 静态代理|动态代理</li>
<li>外观 Facade</li>
<li>桥接 bridge</li>
<li>组合 composite</li>
<li>策略  strategy </li>
<li>模板方法 template</li>
<li>观察者 observer</li>
<li>责任链 chain of responsibility</li>
<li>命令 command </li>
<li>状态  state</li>
</ul>
<h4 id="很少使用（7）"><a href="#很少使用（7）" class="headerlink" title="很少使用（7）"></a>很少使用（7）</h4><ul>
<li>原型 prototype</li>
<li>享元 flyweight</li>
<li>迭代器 iterator</li>
<li>备忘录 memento </li>
<li>中介者 mediator </li>
<li>解释器 interperter</li>
<li>访问者 visitor</li>
</ul>
<h4 id="工厂方法模式-Factory-Method"><a href="#工厂方法模式-Factory-Method" class="headerlink" title="工厂方法模式 ( Factory Method )"></a>工厂方法模式 ( Factory Method )</h4><p>建立一个工厂类，对实现了同一接口的一些类进行实例的创建。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Sender</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MailSender</span> <span class="keyword">implements</span> <span class="title class_">Sender</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmsSender</span> <span class="keyword">implements</span> <span class="title class_">Sender</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">send</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">produceMail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MailSender</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Sender <span class="title function_">produceSms</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SmsSender</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test</span></span><br><span class="line">SendFactory.produceMail().send();</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的工厂方法模式"><a href="#Jdk中的工厂方法模式" class="headerlink" title="Jdk中的工厂方法模式"></a>Jdk中的工厂方法模式</h5><ul>
<li><code>java.lang.Proxy#newProxyInstance()</code></li>
<li><code>java.lang.Object#toString()</code></li>
<li><code>java.lang.Class#newInstance()</code></li>
<li><code>java.lang.reflect.Array#newInstance()</code></li>
<li><code>java.lang.reflect.Constructor#newInstance()</code></li>
<li><code>java.lang.Boolean#valueOf(String)</code></li>
<li><code>java.lang.Class#forName()</code></li>
</ul>
<h5 id="Mybatis中的工厂方法模式"><a href="#Mybatis中的工厂方法模式" class="headerlink" title="Mybatis中的工厂方法模式"></a>Mybatis中的工厂方法模式</h5><ul>
<li><code>org.apache.ibatis.exceptions.ExceptionFactory</code></li>
<li><code>org.apache.ibatis.logging.LogFactory</code></li>
</ul>
<h4 id="抽象工厂模式-Abstract-Factory"><a href="#抽象工厂模式-Abstract-Factory" class="headerlink" title="抽象工厂模式 ( Abstract Factory )"></a>抽象工厂模式 ( Abstract Factory )</h4><p>工厂方法模式的一个问题就是类的创建依赖工厂类，如果要拓展，则需要修改工厂类，违背了开闭原则。使用抽象工厂模式，创建多个工厂类，增加新功能，就直接增加新的工厂类就可以了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Provider</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> Sender <span class="title function_">produce</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmsSendFactory</span> <span class="keyword">implements</span> <span class="title class_">Provider</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Sender <span class="title function_">produce</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SmsSender</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MailSendFactory</span> <span class="keyword">implements</span> <span class="title class_">Provider</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> Sender <span class="title function_">produce</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MailSender</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">MailSendFactory</span>().produce().send();</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">SmsSendFactory</span>().produce().send();</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的抽象工厂模式"><a href="#Jdk中的抽象工厂模式" class="headerlink" title="Jdk中的抽象工厂模式"></a>Jdk中的抽象工厂模式</h5><ul>
<li>&#96;java.util.Calendar#getInstance()</li>
<li><code>java.util.Arrays#asList()</code></li>
<li><code>java.util.ResourceBundle#getBundle()</code></li>
<li><code>java.sql.DriverManager#getConnection()</code></li>
<li><code>java.sql.Connection#createStatement()</code></li>
<li><code>java.sql.Statement#executeQuery()</code></li>
<li><code>java.text.NumberFormat#getInstance()</code></li>
<li><code>javax.xml.transform.TransformerFactory#newInstance()</code></li>
</ul>
<h5 id="Mybatis中的抽象工厂模式"><a href="#Mybatis中的抽象工厂模式" class="headerlink" title="Mybatis中的抽象工厂模式"></a>Mybatis中的抽象工厂模式</h5><ul>
<li><p><code>org.apache.ibatis.datasource.DataSourceFactory</code></p>
<p><code>org.apache.ibatis.datasource.jndi.JndiDataSourceFactory</code></p>
<p><code>org.apache.ibatis.datasource.pooled.PooledDataSourceFactory</code></p>
<p><code>org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory</code></p>
</li>
<li><p><code>org.apache.ibatis.session.SqlSessionFactory</code></p>
<p><code>org.apache.ibatis.session.defaults.DefaultSqlSessionFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DefaultSqlSessionFactory类</span></span><br><span class="line"><span class="keyword">private</span> SqlSession <span class="title function_">openSessionFromDataSource</span><span class="params">(ExecutorType execType, TransactionIsolationLevel level, <span class="type">boolean</span> autoCommit)</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultSqlSession</span>(configuration, executor, autoCommit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="单例模式-Singleton"><a href="#单例模式-Singleton" class="headerlink" title="单例模式 ( Singleton )"></a>单例模式 ( Singleton )</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//静态内部类保证调用getInstance()方法时才初始化，同时由jvm保证仅一次初始化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleTon</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">SingleTon</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//防止被实例化</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingleTonFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SingleTon</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleTon</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> SingleTon <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> SingleTonFactory.instance;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/* 如果该对象被用于序列化，可以保证对象在序列化前后保持一致 */</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">readResolve</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getInstance();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//双重校验加volatile，保证jdk5以后不出现指令重排</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleTon</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> SingleTon instance;</span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">SingleTon</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> SingleTon <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (SingleTon.class) &#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>) &#123;</span><br><span class="line">          instance = <span class="keyword">new</span> <span class="title class_">SingleTon</span>();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h5 id="Jdk中的单例模式"><a href="#Jdk中的单例模式" class="headerlink" title="Jdk中的单例模式"></a>Jdk中的单例模式</h5><ul>
<li><code>java.lang.Runtime#getRuntime()</code></li>
<li><code>java.awt.Toolkit#getDefaultToolkit()</code></li>
<li><code>java.awt.GraphicsEnvironment#getLocalGraphicsEnvironment()</code></li>
<li><code>java.awt.Desktop#getDesktop()</code></li>
</ul>
<h4 id="建造者模式（-Builder"><a href="#建造者模式（-Builder" class="headerlink" title="建造者模式（ Builder )"></a>建造者模式（ Builder )</h4><p>使用多个简单的步骤来一步一步构建成一个复杂的对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiSender</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> List&lt;Sender&gt; senderList;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MultiSender</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MultiSender</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">    senderList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(size);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> List&lt;Sender&gt; <span class="title function_">getSenderList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> senderList;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">  	<span class="keyword">private</span> List&lt;MailSender&gt; mailSenders = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> List&lt;SmsSender&gt; smsSenders = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">      mailSenders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(size);</span><br><span class="line">      smsSenders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(size);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">addMailSender</span><span class="params">(MailSender mailSender)</span> &#123;</span><br><span class="line">      mailSenders.add(mailSender); </span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">  	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">addSmsSender</span><span class="params">(SmsSender smsSender)</span> &#123;</span><br><span class="line">      smsSenders.add(smsSender);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">addSender</span><span class="params">(Sender sender)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(sender <span class="keyword">instanceof</span> MailSender) &#123;</span><br><span class="line">        <span class="built_in">this</span>.addMailSender((MailSender)sender);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(sender <span class="keyword">instanceof</span> SmsSender) &#123;</span><br><span class="line">        <span class="built_in">this</span>.addSmsSender((SmsSender)sender);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> MultiSender <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> mailSenders.size() + smsSenders.size();</span><br><span class="line">      <span class="type">MultiSender</span> <span class="variable">sender</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiSender</span>(size);</span><br><span class="line">      List&lt;Sender&gt; senderList = sender.getSenderList();</span><br><span class="line">      senderList.addAll(mailSenders);</span><br><span class="line">      senderList.addAll(smsSenders);</span><br><span class="line">      <span class="keyword">return</span> sender;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SenderTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    MultiSender.<span class="type">Builder</span> <span class="variable">build</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiSender</span>.Builder();</span><br><span class="line">    build.addSmsSender(<span class="keyword">new</span> <span class="title class_">SmsSender</span>()).addMailSener(<span class="keyword">new</span> <span class="title class_">MailSender</span>());</span><br><span class="line">    <span class="type">MultiSender</span> <span class="variable">sender</span> <span class="operator">=</span> build.build();</span><br><span class="line">    List&lt;Sender&gt; senders = sender.getSenderList();</span><br><span class="line">    <span class="keyword">for</span>(Sender sender : senders) &#123;</span><br><span class="line">      sender.send();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的建造模式"><a href="#Jdk中的建造模式" class="headerlink" title="Jdk中的建造模式"></a>Jdk中的建造模式</h5><ul>
<li><code>java.lang.StringBuilder#append()</code></li>
<li><code>java.lang.StringBuffer#append()</code></li>
<li><code>java.sql.PreparedStatement</code></li>
<li><code>javax.swing.GroupLayout.Group#addComponent()</code></li>
</ul>
<h5 id="Mybatis中建造模式"><a href="#Mybatis中建造模式" class="headerlink" title="Mybatis中建造模式"></a>Mybatis中建造模式</h5><ul>
<li><code>org.apache.ibatis.mapping.CacheBuilder</code></li>
<li><code>org.apache.ibatis.jdbc.SqlBuilder</code></li>
<li><code>org.apache.ibatis.session.SqlSessionFactoryBuilder</code></li>
</ul>
<h4 id="适配器模式（-Adapter"><a href="#适配器模式（-Adapter" class="headerlink" title="适配器模式（ Adapter )"></a>适配器模式（ Adapter )</h4><p>适配器模式将某个类的接口转换成客户端期望的另一个接口表示，目的是消除由于接口不匹配所造成的类的兼容性问题。</p>
<h5 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h5><ul>
<li><p>Target</p>
<p>目标角色，期待得到的接口</p>
</li>
<li><p>Adaptee</p>
<p>适配者角色，被适配的接口</p>
</li>
<li><p>Adapter</p>
<p>适配器角色，将源接口转换成目标接口</p>
</li>
</ul>
<p>主要分为二类：类的适配器模式、对象的适配器模式。 </p>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112239173.png" alt="image-20201202112239173"></p>
<ul>
<li><p>类的适配器模式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Adaptee</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;this is original method!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Targetable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Adapter</span> <span class="keyword">extends</span> <span class="title class_">Adaptee</span> <span class="keyword">implements</span> <span class="title class_">Targetable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;this is the targetable method!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdapterTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Targetable</span>  <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Adapter</span>();</span><br><span class="line">        target.method1();</span><br><span class="line">        target.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//this is original method!</span></span><br><span class="line"><span class="comment">//this is the targetable method!</span></span><br></pre></td></tr></table></figure>

<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112327842.png" alt="image-20201202112327842"></p>
</li>
<li><p>对象的适配器模式</p>
<p>基本思路和类的适配器模式相同，只是将 Adapter 类作修改，这次不继承 Source 类，而是持有 Source 类的实例，以达到解决兼容性的问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Targetable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Adaptee adaptee;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Target</span><span class="params">(Adaptee adaptee)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.adaptee = adaptee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;this is the targetable method!&quot;</span>);  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> &#123;</span><br><span class="line">        adaptee.method1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdapterTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Adaptee</span> <span class="variable">adaptee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Adaptee</span>();</span><br><span class="line">        <span class="type">Targetable</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>(adaptee);</span><br><span class="line">        target.method1();</span><br><span class="line">        target.method2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//this is original method!</span></span><br><span class="line"><span class="comment">//this is the targetable method!</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Jdk中的适配器模式"><a href="#Jdk中的适配器模式" class="headerlink" title="Jdk中的适配器模式"></a>Jdk中的适配器模式</h5><ul>
<li><code>java.util.Arrays#asList()</code></li>
<li><code>javax.swing.JTable(TableModel)</code></li>
<li><code>java.io.InputStreamReader(InputStream)</code></li>
<li><code>java.io.OutputStreamWriter(OutputStream)</code></li>
<li><code>javax.xml.bind.annotation.adapters.XmlAdapter#marshal()</code></li>
<li><code>javax.xml.bind.annotation.adapters.XmlAdapter#unmarshal()</code></li>
</ul>
<h5 id="Mybatis中的适配器模式"><a href="#Mybatis中的适配器模式" class="headerlink" title="Mybatis中的适配器模式"></a>Mybatis中的适配器模式</h5><p>将市场的各种日志插件，转换为MyBatis的日志接口，统一使用。</p>
<p>Target：接口Log就是要转化的目标接口</p>
<p>Adapter：各个子包下的实现类，就是适配器</p>
<p>Adaptee：各个日志框架的日志类，比如org.apache.log4j.Logger就是需要适配的类</p>
<ul>
<li><p><code>org.apache.ibatis.logging.Log</code></p>
<p><code>org.apache.ibatis.logging.slf4j.Slf4jImpl</code></p>
<p><code>org.apache.ibatis.logging.log4j.Log4jImpl</code></p>
</li>
</ul>
<h4 id="装饰模式（-Decorator"><a href="#装饰模式（-Decorator" class="headerlink" title="装饰模式（ Decorator )"></a>装饰模式（ Decorator )</h4><p>装饰模式是指给一个对象增加一些新的功能，而且是动态的，要求装饰对象和被装饰对象实现同一个接口，装饰对象持有被装饰对象的实例。Java IO中的类就是运用了装饰模式，如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileReader</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(filename);</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(f);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FileInputStream</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(filename));</span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(f);</span><br></pre></td></tr></table></figure>

<h5 id="角色-1"><a href="#角色-1" class="headerlink" title="角色"></a>角色</h5><ul>
<li><strong>Component</strong>: 被装饰对象接口</li>
<li><strong>ConcreteComponent</strong>: 被装饰对象实现类</li>
<li><strong>Decorator</strong>: 抽象装饰类</li>
<li><strong>ConcreteDecorator</strong>: 具体装饰类</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112454914.png" alt="image-20201202112454914"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Sourceable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Source</span> <span class="keyword">implements</span> <span class="title class_">Sourceable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;the original method!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Decorator</span> <span class="keyword">implements</span> <span class="title class_">Sourceable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Sourceable source;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Decorator</span><span class="params">(Sourceable source)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.source = source;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before decorator!&quot;</span>);</span><br><span class="line">        source.method();</span><br><span class="line">        System.out.println(<span class="string">&quot;after decorator!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DecoratorTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Sourceable</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Source</span>();</span><br><span class="line">        <span class="type">Sourceable</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Decorator</span>(source);</span><br><span class="line">        obj.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//before decorator!</span></span><br><span class="line"><span class="comment">//the original method!</span></span><br><span class="line"><span class="comment">//after decorator!</span></span><br></pre></td></tr></table></figure>

<p>装饰模式和适配器模式有很多的区别：</p>
<p>  装饰模式：不需要知道<code>被装饰对象</code>的实现详情，主要是动态添加新的功能。</p>
<p>  适配器模式：需要知道<code>被适配对象</code>的实现详情，主要是转化为目标对象需要的接口。</p>
<h5 id="Jdk中的装饰器模式"><a href="#Jdk中的装饰器模式" class="headerlink" title="Jdk中的装饰器模式"></a>Jdk中的装饰器模式</h5><ul>
<li><code>java.io.BufferedInputStream(InputStream)</code></li>
<li><code>java.io.DataInputStream(InputStream)</code></li>
<li><code>java.io.BufferedOutputStream(OutputStream)</code></li>
<li><code>java.util.zip.ZipOutputStream(OutputStream)</code></li>
<li><code>java.util.Collections#checked[List|Map|Set|SortedSet|SortedMap]</code></li>
</ul>
<h5 id="Mybatis中的装饰器模式"><a href="#Mybatis中的装饰器模式" class="headerlink" title="Mybatis中的装饰器模式"></a>Mybatis中的装饰器模式</h5><ul>
<li><p><code>org.apache.ibatis.cache.Cache</code></p>
<p><code>org.apache.ibatis.cache.impl.PerpetualCache</code></p>
<p><code>org.apache.ibatis.cache.decorators.FifoCache</code></p>
</li>
</ul>
<h4 id="代理模式-Proxy"><a href="#代理模式-Proxy" class="headerlink" title="代理模式 ( Proxy )"></a>代理模式 ( Proxy )</h4><p>  代理模式就是多一个代理类出来，替原对象进行一些操作。分为静态代理、动态代理(包括JDK动态代理、cglib代理、Javassist、ASM库)。</p>
<h5 id="角色-2"><a href="#角色-2" class="headerlink" title="角色"></a>角色</h5><ul>
<li>抽象主题（<strong>Subject</strong>）类：通过接口或抽象类声明真实主题和代理对象实现的业务方法。</li>
<li>真实主题（<strong>Real Subject</strong>）类：实现了抽象主题中的具体业务，是代理对象所代表的真实对象，是最终要引用的对象。</li>
<li>代理（<strong>Proxy</strong>）类：提供了与真实主题相同的接口，其内部含有对真实主题的引用，它可以访问、控制或扩展真实主题的功能。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112530291.png" alt="image-20201202112530291"></p>
<h5 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>();</span><br><span class="line">        proxy.Request();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象主题</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//真实主题</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RealSubject</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;访问真实主题方法...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//代理</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> RealSubject realSubject;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (realSubject == <span class="literal">null</span>) &#123;</span><br><span class="line">            realSubject = <span class="keyword">new</span> <span class="title class_">RealSubject</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        preRequest();</span><br><span class="line">        realSubject.request();</span><br><span class="line">        postRequest();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">preRequest</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;访问真实主题之前的预处理。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postRequest</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;访问真实主题之后的后续处理。&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="jdk动态代理"><a href="#jdk动态代理" class="headerlink" title="jdk动态代理"></a>jdk动态代理</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoProxyHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DemoProxyHandler</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;equals&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// Only consider equal when proxies are identical.</span></span><br><span class="line">            <span class="keyword">return</span> (proxy == args[<span class="number">0</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;hashCode&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// Use hashCode of Connection proxy.</span></span><br><span class="line">            <span class="keyword">return</span> System.identityHashCode(proxy);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;close&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// Handle close method: don&#x27;t pass the call on.</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> method.invoke(<span class="built_in">this</span>.target, args);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException ex) &#123;</span><br><span class="line">            <span class="keyword">throw</span> ex.getTargetException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line"><span class="type">Subject</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RealSubject</span>();</span><br><span class="line"><span class="type">DemoProxyHandler</span> <span class="variable">proxyHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DemoProxyHandler</span>(target);</span><br><span class="line"></span><br><span class="line"><span class="type">DemoInterface</span> <span class="variable">proxy</span> <span class="operator">=</span> (DemoInterface) Proxy.newProxyInstance(Subject.class.getClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Subject.class&#125;, proxyHandler);</span><br></pre></td></tr></table></figure>

<p>装饰模式 ( Decorator )  与代理模式 ( Proxy ) 模式的区别</p>
<p>  装饰模式：<code>被装饰对象</code>对客户端透明，用于增强<code>被装饰对象</code>的功能。</p>
<p>  代理模式：<code>被代理对象</code>对客户端不透明，用于控制<code>被代理对象</code>的引用，起到限制作用。</p>
<h5 id="Jdk中的代理模式"><a href="#Jdk中的代理模式" class="headerlink" title="Jdk中的代理模式"></a>Jdk中的代理模式</h5><ul>
<li>java.lang.reflect.Proxy</li>
<li>RMI</li>
</ul>
<h5 id="Mybatis中的代理模式"><a href="#Mybatis中的代理模式" class="headerlink" title="Mybatis中的代理模式"></a>Mybatis中的代理模式</h5><ul>
<li><p><code>org.apache.ibatis.binding.MapperProxyFactory</code></p>
</li>
<li><p><code>org.apache.ibatis.binding.MapperProxy</code></p>
</li>
</ul>
<h4 id="外观模式-Facade"><a href="#外观模式-Facade" class="headerlink" title="外观模式 ( Facade )"></a>外观模式 ( Facade )</h4><blockquote>
<p>外观模式是为了解决类与类之间的依赖关系的，像 Spring 一样，可以将类和类之间的关系配置到配置文件中，而外观模式就是将他们的关系放在一个 Facade 类中，降低了类类之间的耦合度，该模式中没有涉及到接口</p>
</blockquote>
<h5 id="角色-3"><a href="#角色-3" class="headerlink" title="角色"></a>角色</h5><ul>
<li>外观（<strong>Facade</strong>）角色：为多个子系统对外提供一个共同的接口。</li>
<li>子系统（<strong>Sub System</strong>）角色：实现系统的部分功能，客户可以通过外观角色访问它。</li>
</ul>
<p>外观模式 ( Facade )  与装饰模式 ( Decorator ) 模式的区别</p>
<p>  外观模式：一般针对一群类。</p>
<p>  装饰模式：<code>被装饰对象</code>一般是单个类。</p>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112543824.png" alt="image-20201202112543824"></p>
<h5 id="Jdk中的外观模式"><a href="#Jdk中的外观模式" class="headerlink" title="Jdk中的外观模式"></a>Jdk中的外观模式</h5><p>给一组组件，接口，抽象，或者子系统提供一个简单的接口。</p>
<ul>
<li>java.lang.Class</li>
<li>javax.faces.webapp.FacesServlet</li>
</ul>
<h5 id="Mybatis中的外观模式"><a href="#Mybatis中的外观模式" class="headerlink" title="Mybatis中的外观模式"></a>Mybatis中的外观模式</h5><ul>
<li><p><code>org.apache.ibatis.reflection.MetaObject</code></p>
<p><code>org.apache.ibatis.sessio.Configuration</code></p>
</li>
</ul>
<h4 id="桥接模式（-Bridge"><a href="#桥接模式（-Bridge" class="headerlink" title="桥接模式（ Bridge )"></a>桥接模式（ Bridge )</h4><p>桥接模式就是把事物和其具体实现分开，使他们可以各自独立的变化。桥接的用意是：将抽象化与实现化解耦，使得二者可以独立变化。</p>
<h5 id="角色-4"><a href="#角色-4" class="headerlink" title="角色"></a>角色</h5><ul>
<li>抽象化（<strong>Abstraction</strong>）角色：定义抽象类，并包含一个对实现化对象的引用。</li>
<li>扩展抽象化（<strong>Refined Abstraction</strong>）角色：是抽象化角色的子类，实现父类中的业务方法，并通过组合关系调用实现化角色中的业务方法。</li>
<li>实现化（<strong>Implementor</strong>）角色：定义实现化角色的接口，供扩展抽象化角色调用。被桥接对象的接口。</li>
<li>具体实现化（<strong>Concrete Implementor</strong>）角色：给出实现化角色接口的具体实现。实际被桥接的对象。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202112600851.png" alt="image-20201202112600851"></p>
<h5 id="Jdk中的桥接模式"><a href="#Jdk中的桥接模式" class="headerlink" title="Jdk中的桥接模式"></a>Jdk中的桥接模式</h5><ul>
<li>AWT</li>
<li>JDBC</li>
</ul>
<p>桥接模式与装饰模式的区别：</p>
<p>装饰模式：给被装饰的对象动态地添加一些额外功能，适应新需求而添加新功能，不影响被装饰的对象</p>
<p>桥接模式：适应变化维度的一种模式，它在于将对象的各个维度的变化都独立开来，使一些变化不受其他因素变化的影响，被桥接对象自身有沿着多个维度变化的趋势 , 本身不稳定</p>
<h5 id="Mybatis-中的桥接模式"><a href="#Mybatis-中的桥接模式" class="headerlink" title="Mybatis 中的桥接模式"></a>Mybatis 中的桥接模式</h5><ul>
<li><p><code>org.apache.ibatis.executor.Executor</code></p>
<p><code>org.apache.ibatis.executor.BaseExecutor</code></p>
<p><code>org.apache.ibatis.executor.CachingExecutor</code></p>
</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/v2-aecdd95efaeb6cfb30a81ae0fb9efe8d_720w.jpg" alt="img"></p>
<h4 id="组合模式-Composite"><a href="#组合模式-Composite" class="headerlink" title="组合模式 ( Composite )"></a>组合模式 ( Composite )</h4><p>组合模式有时又叫<strong>部分</strong>-<strong>整体</strong>模式，在处理类似树形结构的问题时比较方便。</p>
<p>使得客户端看来单个对象和对象的组合是同等的。换句话说，某个类型的方法同时也接受自身类型作为参数。</p>
<h5 id="角色-5"><a href="#角色-5" class="headerlink" title="角色"></a>角色</h5><ul>
<li><strong>组件</strong> （<strong>Component</strong>） 接口描述了树中简单项目和复杂项目所共有的操作，是组合中对象声明接口，实现所有类共有接口的默认行为。</li>
<li><strong>叶节点</strong> （<strong>Leaf</strong>） 是树的基本结构， 它不包含子项目。</li>
<li><strong>容器</strong> （Container）——又名 “组合 （<strong>Composite</strong>）”——是包含叶节点或其他容器等子项目的单位。 容器不知道其子项目所属的具体类， 它只通过通用的组件接口与其子项目交互。.</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113326883.png" alt="image-20201202113326883"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">TreeNode</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> TreeNode parent;</span><br><span class="line">  <span class="keyword">private</span> Vector&lt;TreeNode&gt; children;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">TreeNode</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    children.add(node);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(TreeNode node)</span> &#123;</span><br><span class="line">    children.remove(node);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> Enumeration&lt;TreeNode&gt; <span class="title function_">getChildren</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> child.elements();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tree</span> &#123;</span><br><span class="line">  <span class="type">TreeNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Tree</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    root = <span class="keyword">new</span> <span class="title class_">TreeNode</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">    <span class="type">Tree</span> <span class="variable">tree</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tree</span>(<span class="string">&quot;A&quot;</span>);  </span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">nodeB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="string">&quot;B&quot;</span>);  </span><br><span class="line">    <span class="type">TreeNode</span> <span class="variable">nodeC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(<span class="string">&quot;C&quot;</span>);  </span><br><span class="line"></span><br><span class="line">    nodeB.add(nodeC);  </span><br><span class="line">    tree.root.add(nodeB);  </span><br><span class="line">    System.out.println(<span class="string">&quot;build the tree finished!&quot;</span>);  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的组合模式"><a href="#Jdk中的组合模式" class="headerlink" title="Jdk中的组合模式"></a>Jdk中的组合模式</h5><ul>
<li><code>javax.swing.JComponent#add(Component)</code></li>
<li><code>java.awt.Container#add(Component)</code></li>
<li><code>java.util.Map#putAll(Map)</code></li>
<li><code>java.util.List#addAll(Collection)</code></li>
<li><code>java.util.Set#addAll(Collection)</code></li>
</ul>
<h5 id="Mybatis中的组合模式"><a href="#Mybatis中的组合模式" class="headerlink" title="Mybatis中的组合模式"></a>Mybatis中的组合模式</h5><p>参见<a target="_blank" rel="noopener" href="http://870314.com/2019/11/02/mybatis%E5%8A%A8%E6%80%81sql%E5%AE%9E%E7%8E%B0%E4%B9%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/">mybatis动态sql之组合模式</a></p>
<ul>
<li><p><code>org.apache.ibatis.scripting.xmltags.SqlNode</code></p>
<p><code>org.apache.ibatis.scripting.xmltags.TrimSqlNode</code></p>
<p><code>org.apache.ibatis.scripting.xmltags.MixedSqlNode</code></p>
</li>
</ul>
<h5 id="模式之间的关系与区别"><a href="#模式之间的关系与区别" class="headerlink" title="模式之间的关系与区别"></a>模式之间的关系与区别</h5><ul>
<li><strong>桥接模式</strong>通常是会于开发前期进行设计，使你能够将程序的各个部分独立开来以便开发。<strong>适配器模式</strong>通常在已有程序中使用，以使相互不兼容的类可以很好地协同工作。</li>
<li><strong>适配器模式</strong>可以对已有对象的接口进行修改，<strong>装饰模式</strong>则能在不改变对象接口的前提下强化对象功能。</li>
<li><strong>适配器模式</strong>能为被封装对象提供不同的接口，<strong>代理模式</strong>能为对象提供相同的接口，<strong>装饰模式</strong>则能为对象提供加强的接口。</li>
<li><strong>外观模式</strong>为现有对象定义了一个新接口，<strong>适配器模式</strong>则会试图运用已有的接口。适配器通常只封装一个对象，外观通常会作用于整个对象子系统上。</li>
<li><strong>桥接</strong>、 <strong>状态模式</strong>和<strong>策略模式</strong> （在某种程度上包括<strong>适配器</strong>） 模式的接口非常相似。 实际上，它们都基于<strong>组合模式</strong>——即将工作委派给其他对象， 不过也各自解决了不同的问题。</li>
</ul>
<h4 id="策略模式（-Strategy"><a href="#策略模式（-Strategy" class="headerlink" title="策略模式（ Strategy )"></a>策略模式（ Strategy )</h4><p>策略模式定义了一系列算法，并将每个算法封装起来，使他们可以相互替换，且算法的变化不会影响到使用算法的客户。需要设计一个接口，为一系列实现类提供统一的方法，多个实现类实现该接口，设计一个抽象类（可有可无，属于辅助类），提供辅助函数。</p>
<h5 id="角色-6"><a href="#角色-6" class="headerlink" title="角色"></a>角色</h5><ul>
<li><strong>Context</strong>: 环境类</li>
<li><strong>Strategy</strong>: 抽象策略类</li>
<li><strong>ConcreteStrategy</strong>: 具体策略类</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113239659.png" alt="image-20201202113239659"></p>
<h5 id="Jdk中的策略模式"><a href="#Jdk中的策略模式" class="headerlink" title="Jdk中的策略模式"></a>Jdk中的策略模式</h5><p>使用这个模式来将一组算法封装成一系列对象。通过传递这些对象可以灵活的改变程序的功能。</p>
<ul>
<li><code>java.util.Comparator#compare()</code></li>
<li><code>javax.servlet.http.HttpServlet</code></li>
<li><code>javax.servlet.Filter#doFilter()</code></li>
</ul>
<h5 id="Mybatis中的策略模式"><a href="#Mybatis中的策略模式" class="headerlink" title="Mybatis中的策略模式"></a>Mybatis中的策略模式</h5><ul>
<li><p><code>org.apache.ibatis.session.Configuration.newExecutor(Transaction)</code></p>
<p><code>org.apache.ibatis.executor.Executor</code></p>
<p><code>org.apache.ibatis.executor.BatchExecutor</code></p>
<p><code>org.apache.ibatis.executor.SimpleExecutor</code></p>
<p><code>org.apache.ibatis.executor.ReuseExecutor</code></p>
</li>
</ul>
<h4 id="模板方法模式（-Template-Method"><a href="#模板方法模式（-Template-Method" class="headerlink" title="模板方法模式（ Template Method )"></a>模板方法模式（ Template Method )</h4><p>  模板方法模式是指一个抽象类中，有一个主方法，再定义1到n个方法，可以是抽象的，也可以是实际方法，定义一个类，继承该抽象类，重写抽象方法。通过调用抽象类，实现对子类的调用。</p>
<h5 id="角色-7"><a href="#角色-7" class="headerlink" title="角色"></a>角色</h5><ul>
<li><strong>抽象类</strong> （<strong>Abstract­Class</strong>） 会声明作为算法步骤的方法， 以及依次调用它们的实际模板方法。 算法步骤可以被声明为 <code>抽象</code>类型， 也可以提供一些默认实现。</li>
<li><strong>具体类</strong> （<strong>Concrete­Class</strong>） 可以重写所有步骤， 但不能重写模板方法自身。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113440837.png" alt="image-20201202113440837"></p>
<h5 id="Jdk中的模板方法模式"><a href="#Jdk中的模板方法模式" class="headerlink" title="Jdk中的模板方法模式"></a>Jdk中的模板方法模式</h5><p>让子类可以重写方法的一部分，而不是整个重写，你可以控制子类需要重写那些操作。</p>
<ul>
<li><code>java.util.Collections#sort()</code></li>
<li><code>java.io.InputStream#skip()</code></li>
<li><code>java.io.InputStream#read()</code></li>
<li><code>java.util.AbstractList#indexOf()</code></li>
</ul>
<h5 id="Mybatis中的模板方法模式"><a href="#Mybatis中的模板方法模式" class="headerlink" title="Mybatis中的模板方法模式"></a>Mybatis中的模板方法模式</h5><ul>
<li><p><code>org.apache.ibatis.executor.Executor</code></p>
<p><code>org.apache.ibatis.executor.BaseExecutor</code></p>
<p><code>org.apache.ibatis.executor.BatchExecutor</code></p>
<p><code>org.apache.ibatis.executor.SimpleExecutor</code></p>
<p><code>org.apache.ibatis.executor.ReuseExecutor</code></p>
</li>
</ul>
<h4 id="观察者模式（-Observer"><a href="#观察者模式（-Observer" class="headerlink" title="观察者模式（ Observer )"></a>观察者模式（ Observer )</h4><p>观察者模式很好理解，类似于邮件订阅和RSS订阅，当我们浏览一些博客或wiki时，经常会看到RSS图标，就这的意思是，当你订阅了该文章，如果后续有更新，会及时通知你。其实，简单来讲就一句话：当一个对象变化时，其它依赖该对象的对象都会收到通知，并且随着变化！对象之间是一种一对多的关系。</p>
<h5 id="角色-8"><a href="#角色-8" class="headerlink" title="角色"></a>角色</h5><ul>
<li>抽象主题（<strong>Subject</strong>）角色：也叫抽象目标类，它提供了一个用于保存观察者对象的聚集类和增加、删除观察者对象的方法，以及通知所有观察者的抽象方法。</li>
<li>具体主题（<strong>Concrete Subject</strong>）角色：也叫具体目标类，它实现抽象目标中的通知方法，当具体主题的内部状态发生改变时，通知所有注册过的观察者对象。</li>
<li>抽象观察者（<strong>Observer</strong>）角色：它是一个抽象类或接口，它包含了一个更新自己的抽象方法，当接到具体主题的更改通知时被调用。</li>
<li>具体观察者（<strong>Concrete Observer</strong>）角色：实现抽象观察者中定义的抽象方法，以便在得到目标的更改通知时更新自身的状态。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113507478.png" alt="image-20201202113507478"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Object arg)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observable</span> &#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">addObserver</span><span class="params">(Observer o)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">removeObserver</span><span class="params">(Observer o)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">notifyObservers</span><span class="params">(Object arg)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Subject</span> <span class="keyword">implements</span> <span class="title class_">Observable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; obs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addObserver</span><span class="params">(Observer o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!obs.contains(o)) &#123;</span><br><span class="line">            obs.add(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">removeObserver</span><span class="params">(Observer o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(obs.contains(o))&#123;</span><br><span class="line">            obs.remove(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">notifyObservers</span><span class="params">(Object arg)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer o : obs) &#123;</span><br><span class="line">            o.update(arg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">asyncNotifyObservers</span><span class="params">(Object arg)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer o : obs) &#123;</span><br><span class="line">            executor.submit(() -&gt; o.update(arg));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的观察者模式"><a href="#Jdk中的观察者模式" class="headerlink" title="Jdk中的观察者模式"></a>Jdk中的观察者模式</h5><ul>
<li><code>java.util.EventListener</code></li>
<li><code>javax.servlet.http.HttpSessionBindingListener</code></li>
<li><code>javax.servlet.http.HttpSessionAttributeListener</code></li>
<li><code>javax.faces.event.PhaseListener</code></li>
</ul>
<h5 id="Spring中的观察者模式"><a href="#Spring中的观察者模式" class="headerlink" title="Spring中的观察者模式"></a>Spring中的观察者模式</h5><ul>
<li><code>org.springframework.context.ApplicationListener </code></li>
<li><code>org.springframework.context.event.ApplicationEventMulticaster</code></li>
</ul>
<h4 id="责任链模式-Chain-of-Responsibility"><a href="#责任链模式-Chain-of-Responsibility" class="headerlink" title="责任链模式 ( Chain of Responsibility )"></a>责任链模式 ( Chain of Responsibility )</h4><p>责任链模式，有多个对象，每个对象持有对下一个对象的引用，这样就会形成一条链，请求在这条链上传递，直到某一对象决定处理该请求。但是发出者并不清楚到底最终那个对象会处理该请求，所以，责任链模式可以实现，在隐瞒客户端的情况下，对系统进行动态的调整。</p>
<h5 id="角色-9"><a href="#角色-9" class="headerlink" title="角色"></a>角色</h5><ul>
<li>抽象处理者（<strong>Handler</strong>）角色：定义一个处理请求的接口，包含抽象处理方法和一个后继连接。</li>
<li>具体处理者（<strong>Concrete Handler</strong>）角色：实现抽象处理者的处理方法，判断能否处理本次请求，如果可以处理请求则处理，否则将该请求转给它的后继者。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113541987.png" alt="image-20201202113541987"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operator</span><span class="params">()</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Handler next;</span><br><span class="line">    <span class="keyword">public</span> Handler <span class="title function_">getNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> handler;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNext</span><span class="params">(Handler handler)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.handler = handler;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteHandler</span> <span class="keyword">extends</span> <span class="title class_">AbstractHandler</span> <span class="keyword">implements</span> <span class="title class_">Handler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConcreteHandler</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operator</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; deal!&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (getNext() != <span class="literal">null</span>) &#123;</span><br><span class="line">            getNext().operator();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConcreteHandler</span> <span class="variable">h1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteHandler</span>(<span class="string">&quot;h1&quot;</span>);</span><br><span class="line">        <span class="type">ConcreteHandler</span> <span class="variable">h2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteHandler</span>(<span class="string">&quot;h2&quot;</span>);</span><br><span class="line">        <span class="type">ConcreteHandler</span> <span class="variable">h3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcreteHandler</span>(<span class="string">&quot;h3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        h1.setNext(h2);</span><br><span class="line">        h2.setNext(h3);</span><br><span class="line"></span><br><span class="line">        h1.operator();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的责任链模式"><a href="#Jdk中的责任链模式" class="headerlink" title="Jdk中的责任链模式"></a>Jdk中的责任链模式</h5><ul>
<li><code>java.util.logging.Logger#log()</code></li>
<li><code>javax.servlet.Filter#doFilter()</code></li>
</ul>
<h5 id="Mybatis中的责任链模式"><a href="#Mybatis中的责任链模式" class="headerlink" title="Mybatis中的责任链模式"></a>Mybatis中的责任链模式</h5><ul>
<li><p><code>org.apache.ibatis.plugin.InterceptorChain</code></p>
<p><code>org.apache.ibatis.session.Configuration.addInterceptor()</code></p>
</li>
</ul>
<h4 id="命令模式-Command"><a href="#命令模式-Command" class="headerlink" title="命令模式  ( Command )"></a>命令模式  ( Command )</h4><p>命令模式很好理解，举个例子，司令员下令让士兵去干件事情，从整个事情的角度来考虑，司令员的作用是，发出口令，口令经过传递，传到了士兵耳朵里，士兵去执行。这个过程好在，三者相互解耦，任何一方都不用去依赖其他人，只需要做好自己的事儿就行，司令员要的是结果，不会去关注到底士兵是怎么实现的。</p>
<h5 id="角色-10"><a href="#角色-10" class="headerlink" title="角色"></a>角色</h5><ul>
<li>抽象命令类（<strong>Command</strong>）角色：声明执行命令的接口，拥有执行命令的抽象方法 execute()。</li>
<li>具体命令类（<strong>Concrete Command</strong>）角色：是抽象命令类的具体实现类，它拥有接收者对象，并通过调用接收者的功能来完成命令要执行的操作。</li>
<li>实现者&#x2F;接收者（<strong>Receiver</strong>）角色：执行命令功能的相关操作，是具体命令对象业务的真正实现者。</li>
<li>调用者&#x2F;请求者（<strong>Invoker</strong>）角色：是请求的发送者，它通常拥有很多的命令对象，并通过访问命令对象来执行相关请求，它不直接访问接收者。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113616818.png" alt="image-20201202113616818"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Command</span>&lt;T&gt; &#123;</span><br><span class="line">    T <span class="title function_">execute</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommandImpl</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Command</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Receiver&lt;T&gt; receiver;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CommandImpl</span><span class="params">(Receiver receiver)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.receiver = receiver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> receiver.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommandInvoker</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Command&lt;T&gt; command;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构造注入</span></span><br><span class="line">    CommandInvoker(Command&lt;T&gt; command) &#123;</span><br><span class="line">        <span class="built_in">this</span>.command = command;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设值注入</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCommand</span><span class="params">(Command&lt;T&gt; command)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.command = command;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//业务方法，用于调用命令类的execute()方法</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">call</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> command.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Receiver</span>&lt;T&gt; &#123;</span><br><span class="line">    T <span class="title function_">execute</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddReceiver</span> <span class="keyword">implements</span> <span class="title class_">Receiver</span>&lt;Integer&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num1, num2;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AddReceiver</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.num1 = num1;</span><br><span class="line">        <span class="built_in">this</span>.num2 = num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">execute</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommandTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Receiver&lt;Integer&gt; receiver = <span class="keyword">new</span> <span class="title class_">AddReceiver</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        Command&lt;Integer&gt; command = <span class="keyword">new</span> <span class="title class_">CommandImpl</span>&lt;&gt;(receiver);</span><br><span class="line"></span><br><span class="line">        CommandInvoker&lt;Integer&gt; invoker = <span class="keyword">new</span> <span class="title class_">CommandInvoker</span>&lt;&gt;(command);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> invoker.call();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的命令模式"><a href="#Jdk中的命令模式" class="headerlink" title="Jdk中的命令模式"></a>Jdk中的命令模式</h5><ul>
<li><code>java.lang.Runnable</code></li>
<li><code>javax.swing.Action</code></li>
</ul>
<h5 id="Activiti中的命令模式-与责任链模式"><a href="#Activiti中的命令模式-与责任链模式" class="headerlink" title="Activiti中的命令模式(与责任链模式)"></a>Activiti中的命令模式(与责任链模式)</h5><ul>
<li><p><code>org.activiti.engine.impl.interceptor.CommandInvoker</code></p>
<p><code>org.activiti.engine.impl.interceptor.Command</code></p>
<p><code>org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl.initCommandExecutors()</code></p>
</li>
</ul>
<h4 id="状态模式（-State"><a href="#状态模式（-State" class="headerlink" title="状态模式（ State )"></a>状态模式（ State )</h4><p>当对象的状态改变时，同时改变其行为。</p>
<h5 id="角色-11"><a href="#角色-11" class="headerlink" title="角色"></a>角色</h5><ul>
<li>环境类（<strong>Context</strong>）角色：也称为上下文，它定义了客户端需要的接口，内部维护一个当前状态，并负责具体状态的切换。</li>
<li>抽象状态（<strong>State</strong>）角色：定义一个接口，用以封装环境对象中的特定状态所对应的行为，可以有一个或多个行为。</li>
<li>具体状态（<strong>Concrete State</strong>）角色：实现抽象状态所对应的行为，并且在需要的情况下进行状态切换。</li>
</ul>
<p><img src="/2017/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%9E%E9%A1%BE/assets/image-20201202113639953.png" alt="image-20201202113639953"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="comment">//声明抽象业务方法，不同的具体状态类可以不同的实现  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">()</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteState</span> <span class="keyword">extends</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//方法具体实现代码  </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> State state; <span class="comment">//维持一个对抽象状态对象的引用  </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> value; <span class="comment">//其他属性值，该属性值的变化可能会导致对象状态发生变化  </span></span><br><span class="line"></span><br><span class="line">     <span class="comment">//定义环境类的初始状态</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Context</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = <span class="keyword">new</span> <span class="title class_">ConcreteState</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//设置状态对象  </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(State state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//其他代码  </span></span><br><span class="line">        state.handle(); <span class="comment">//调用状态对象的业务方法  </span></span><br><span class="line">        <span class="comment">//其他代码  </span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">checkState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(value == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.state = <span class="keyword">new</span> <span class="title class_">State1</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(value ==<span class="number">2</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.state == <span class="keyword">new</span> <span class="title class_">State2</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Jdk中的状态模式</p>
<p>通过改变对象内部的状态，使得你可以在运行时动态改变一个对象的行为。</p>
<ul>
<li><code>java.util.Iterator</code></li>
<li><code>javax.faces.lifecycle.LifeCycle#execute()</code></li>
</ul>
</li>
<li><p>Spring StateMachine 状态机</p>
</li>
</ul>
<h4 id="原型模式（-Prototype"><a href="#原型模式（-Prototype" class="headerlink" title="原型模式（ Prototype )"></a>原型模式（ Prototype )</h4><p>原型模式虽然是创建型的模式，但是与工程模式没有关系，从名字即可看出，该模式的思想就是将一个对象作为原型，对其进行复制、克隆，产生一个和原对象类似的新对象。在 Java 中，复制对象是通过 <code>clone()</code> 实现的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Prototype</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">    <span class="type">Prototype</span> <span class="variable">proto</span> <span class="operator">=</span> (Prototype) <span class="built_in">super</span>.clone();</span><br><span class="line">    <span class="keyword">return</span> proto;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>浅复制</strong>：将一个对象复制后，基本数据类型的变量都会重新创建，而引用类型，指向的还是原对象所指向的。<br><strong>深复制</strong>：将一个对象复制后，不论是基本数据类型还是引用类型，都是重新创建的。简单来说，就是深复制进行了完全彻底的复制，而浅复制不彻底。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Prototype</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>, Serializable &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">  <span class="keyword">private</span> String string;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> SerializableObject obj;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 浅复制 */</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">    <span class="type">Prototype</span> <span class="variable">proto</span> <span class="operator">=</span> (Prototype) <span class="built_in">super</span>.clone();</span><br><span class="line">    <span class="keyword">return</span> proto;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 深复制 */</span></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">deepClone</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 写入当前对象的二进制流 */</span></span><br><span class="line">    <span class="type">ByteArrayOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">    <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(bos);</span><br><span class="line">    oos.writeObject(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 读出二进制流产生的新对象 */</span></span><br><span class="line">    <span class="type">ByteArrayInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bos.toByteArray());</span><br><span class="line">    <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bis);</span><br><span class="line">    <span class="keyword">return</span> ois.readObject();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setString</span><span class="params">(String string)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.string = string;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> SerializableObject <span class="title function_">getObj</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObj</span><span class="params">(SerializableObject obj)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.obj = obj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SerializableObject</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Jdk中的原型模式"><a href="#Jdk中的原型模式" class="headerlink" title="Jdk中的原型模式"></a>Jdk中的原型模式</h5><ul>
<li><code>java.lang.Object#clone()</code></li>
<li><code>java.lang.Cloneable</code></li>
</ul>
<h4 id="享元模式（-Flyweight"><a href="#享元模式（-Flyweight" class="headerlink" title="享元模式（ Flyweight )"></a>享元模式（ Flyweight )</h4><p>享元模式的主要目的是实现对象的共享，即共享池，当系统中对象多的时候可以减少内存的开销，通常与工厂模式一起使用。</p>
<h5 id="Jdk中的享元模式"><a href="#Jdk中的享元模式" class="headerlink" title="Jdk中的享元模式"></a>Jdk中的享元模式</h5><p>使用缓存来加速大量小对象的访问时间。</p>
<ul>
<li><code>java.lang.Integer#valueOf(int)</code></li>
<li><code>java.lang.Boolean#valueOf(boolean)</code></li>
<li><code>java.lang.Byte#valueOf(byte)</code></li>
<li><code>java.lang.Character#valueOf(char)</code></li>
</ul>
<h4 id="迭代子模式-Iterator"><a href="#迭代子模式-Iterator" class="headerlink" title="迭代子模式  ( Iterator )"></a>迭代子模式  ( Iterator )</h4><p>顾名思义，迭代器模式就是顺序访问聚集中的对象，一般来说，集合中非常常见，如果对集合类比较熟悉的话，理解本模式会十分轻松。这句话包含两层意思：一是需要遍历的对象，即聚集对象，二是迭代器对象，用于对聚集对象进行遍历访问。</p>
<h5 id="Jdk中的迭代子模式"><a href="#Jdk中的迭代子模式" class="headerlink" title="Jdk中的迭代子模式"></a>Jdk中的迭代子模式</h5><p>提供一个一致的方法来顺序访问集合中的对象，这个方法与底层的集合的具体实现无关。</p>
<ul>
<li><code>java.util.Iterator</code></li>
<li><code>java.util.Enumeration</code></li>
</ul>
<h5 id="Mybatis中的迭代子模式"><a href="#Mybatis中的迭代子模式" class="headerlink" title="Mybatis中的迭代子模式"></a>Mybatis中的迭代子模式</h5><ul>
<li><code>org.apache.ibatis.reflection.property.PropertyTokenizer</code></li>
</ul>
<h4 id="备忘录模式-Memento"><a href="#备忘录模式-Memento" class="headerlink" title="备忘录模式  ( Memento )"></a>备忘录模式  ( Memento )</h4><p>主要目的是保存一个对象的某个状态，以便在适当的时候恢复对象。</p>
<h5 id="Jdk中的备忘录模式"><a href="#Jdk中的备忘录模式" class="headerlink" title="Jdk中的备忘录模式"></a>Jdk中的备忘录模式</h5><p>生成对象状态的一个快照，以便对象可以恢复原始状态而不用暴露自身的内容。Date对象通过自身内部的一个long值来实现备忘录模式。</p>
<ul>
<li>java.util.Date</li>
<li>java.io.Serializable</li>
</ul>
<h4 id="中介者模式-Mediator"><a href="#中介者模式-Mediator" class="headerlink" title="中介者模式  ( Mediator )"></a>中介者模式  ( Mediator )</h4><p>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>
<h5 id="Jdk中的中介者模式"><a href="#Jdk中的中介者模式" class="headerlink" title="Jdk中的中介者模式"></a>Jdk中的中介者模式</h5><p>通过使用一个中间对象来进行消息分发以及减少类之间的直接依赖。</p>
<ul>
<li><code>java.util.Timer</code></li>
<li><code>java.util.concurrent.Executor#execute()</code></li>
<li><code>java.util.concurrent.ExecutorService#submit()</code></li>
<li><code>java.lang.reflect.Method#invoke()</code></li>
</ul>
<h4 id="解释器模式-Interpreter"><a href="#解释器模式-Interpreter" class="headerlink" title="解释器模式  ( Interpreter )"></a>解释器模式  ( Interpreter )</h4><p>给定一种语言，定义他的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中句子。</p>
<p>解释器模式是一个比较少用的模式。</p>
<h5 id="Jdk中的解释器模式"><a href="#Jdk中的解释器模式" class="headerlink" title="Jdk中的解释器模式"></a>Jdk中的解释器模式</h5><p>这个模式通常定义了一个语言的语法，然后解析相应语法的语句。</p>
<ul>
<li><code>java.util.Pattern</code></li>
<li><code>java.text.Normalizer</code></li>
<li><code>java.text.Format</code></li>
</ul>
<h4 id="访问者模式-Visitor"><a href="#访问者模式-Visitor" class="headerlink" title="访问者模式 ( Visitor )"></a>访问者模式 ( Visitor )</h4><p>访问者模式把数据结构和作用于结构上的操作解耦合，使得操作集合可相对自由地演化。访问者模式适用于数据结构相对稳定算法又易变化的系统。因为访问者模式使得算法操作增加变得容易。若系统数据结构对象易于变化，经常有新的数据对象增加进来，则不适合使用访问者模式。访问者模式的优点是增加操作很容易，因为增加操作意味着增加新的访问者。访问者模式将有关行为集中到一个访问者对象中，其改变不影响系统数据结构。其缺点就是增加新的数据结构很困难。</p>
<p>访问者模式算是最复杂也是最难以理解的一种模式了。它表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素类的前提下定义作用于这些元素的新操作。</p>
<h5 id="角色-12"><a href="#角色-12" class="headerlink" title="角色"></a>角色</h5><ul>
<li><p><strong>Visitor</strong>：抽象访问者角色，为该对象结构中具体元素角色声明一个访问操作接口。该操作接口的名字和参数标识了发送访问请求给具体访问者的具体元素角色，这样访问者就可以通过该元素角色的特定接口直接访问它。</p>
</li>
<li><p><strong>ConcreteVisitor</strong>：具体访问者角色，实现Visitor声明的接口。</p>
</li>
<li><p><strong>Element</strong>：定义一个接受访问操作(accept())，它以一个访问者(Visitor)作为参数。</p>
</li>
<li><p><strong>ConcreteElement</strong>：具体元素，实现了抽象元素(Element)所定义的接受操作接口。</p>
</li>
<li><p><strong>ObjectStructure</strong>：结构对象角色，这是使用访问者模式必备的角色。它具备以下特性：能枚举它的元素；可以提供一个高层接口以允许访问者访问它的元素；如有需要，可以设计成一个复合对象或者一个聚集（如一个列表或无序集合）。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Element</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(IVisitor visitor)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteElement1</span> <span class="keyword">extends</span> <span class="title class_">Element</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是元素1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(IVisitor visitor)</span>&#123;</span><br><span class="line">        visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcreteElement2</span> <span class="keyword">extends</span> <span class="title class_">Element</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是元素2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accept</span><span class="params">(IVisitor visitor)</span>&#123;</span><br><span class="line">        visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IVisitor</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(ConcreteElement1el1)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(ConcreteElement2el2)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Visitor</span> <span class="keyword">implements</span> <span class="title class_">IVisitor</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(ConcreteElement1 el1)</span>&#123;</span><br><span class="line">        el1.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">visit</span><span class="params">(ConcreteElement2 el2)</span>&#123;</span><br><span class="line">        el2.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ObjectStruture</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Element&gt; <span class="title function_">getList</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Element&gt;list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Element&gt;();</span><br><span class="line">        <span class="type">Random</span> <span class="variable">ran</span> <span class="operator">=</span> newRandom();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i ++)&#123;</span><br><span class="line">            <span class="type">int</span> a=ran.nextInt(<span class="number">100</span>);</span><br><span class="line">            <span class="keyword">if</span>(a&gt;<span class="number">50</span>)&#123;</span><br><span class="line">                list.add (newConcreteElement1());</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                list.add (newConcreteElement2());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[]args)</span>&#123;</span><br><span class="line">        List&lt;Element&gt; list = ObjectStruture.getList();</span><br><span class="line">        <span class="keyword">for</span>(Elemente:list)&#123;</span><br><span class="line">            e.accept(newVisitor());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Jdk中的访问者模式"><a href="#Jdk中的访问者模式" class="headerlink" title="Jdk中的访问者模式"></a>Jdk中的访问者模式</h5><p>提供一个方便的可维护的方式来操作一组对象。它使得你在不改变操作的对象前提下，可以修改或者扩展对象的行为。</p>
<ul>
<li><code>javax.lang.model.element.Element</code> and <code>javax.lang.model.element.ElementVisitor</code></li>
<li><code>javax.lang.model.type.TypeMirror</code> and <code>javax.lang.model.type.TypeVisitor</code></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
              <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag"># 设计模式</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/02/09/webservice%E5%9F%BA%E7%A1%80/" rel="prev" title="WebService基础回顾">
      <i class="fa fa-chevron-left"></i> WebService基础回顾
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/01/15/RabbitMQ%E5%85%A5%E9%97%A8/" rel="next" title="Rabbitmq入门">
      Rabbitmq入门 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E7%B1%BB"><span class="nav-number">1.1.</span> <span class="nav-text">分类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%885%EF%BC%89"><span class="nav-number">1.1.1.</span> <span class="nav-text">创建型模式（5）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%887%EF%BC%89"><span class="nav-number">1.1.2.</span> <span class="nav-text">结构型模式（7）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%8811%EF%BC%89"><span class="nav-number">1.1.3.</span> <span class="nav-text">行为型模式（11）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99"><span class="nav-number">1.2.</span> <span class="nav-text">七大原则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%EF%BC%884%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">简单（4）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%89%E7%94%A8%E7%9A%84%EF%BC%8812%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">有用的（12）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BE%88%E5%B0%91%E4%BD%BF%E7%94%A8%EF%BC%887%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">很少使用（7）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F-Factory-Method"><span class="nav-number">1.6.</span> <span class="nav-text">工厂方法模式 ( Factory Method )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.6.1.</span> <span class="nav-text">Jdk中的工厂方法模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.6.2.</span> <span class="nav-text">Mybatis中的工厂方法模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F-Abstract-Factory"><span class="nav-number">1.7.</span> <span class="nav-text">抽象工厂模式 ( Abstract Factory )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.7.1.</span> <span class="nav-text">Jdk中的抽象工厂模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.7.2.</span> <span class="nav-text">Mybatis中的抽象工厂模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-Singleton"><span class="nav-number">1.8.</span> <span class="nav-text">单例模式 ( Singleton )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.8.1.</span> <span class="nav-text">Jdk中的单例模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88-Builder"><span class="nav-number">1.9.</span> <span class="nav-text">建造者模式（ Builder )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%BB%BA%E9%80%A0%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.9.1.</span> <span class="nav-text">Jdk中的建造模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E5%BB%BA%E9%80%A0%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.9.2.</span> <span class="nav-text">Mybatis中建造模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%EF%BC%88-Adapter"><span class="nav-number">1.10.</span> <span class="nav-text">适配器模式（ Adapter )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2"><span class="nav-number">1.10.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.10.2.</span> <span class="nav-text">Jdk中的适配器模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.10.3.</span> <span class="nav-text">Mybatis中的适配器模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%EF%BC%88-Decorator"><span class="nav-number">1.11.</span> <span class="nav-text">装饰模式（ Decorator )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-1"><span class="nav-number">1.11.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.2.</span> <span class="nav-text">Jdk中的装饰器模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.11.3.</span> <span class="nav-text">Mybatis中的装饰器模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F-Proxy"><span class="nav-number">1.12.</span> <span class="nav-text">代理模式 ( Proxy )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-2"><span class="nav-number">1.12.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.12.2.</span> <span class="nav-text">静态代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jdk%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="nav-number">1.12.3.</span> <span class="nav-text">jdk动态代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.12.4.</span> <span class="nav-text">Jdk中的代理模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.12.5.</span> <span class="nav-text">Mybatis中的代理模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F-Facade"><span class="nav-number">1.13.</span> <span class="nav-text">外观模式 ( Facade )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-3"><span class="nav-number">1.13.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.13.2.</span> <span class="nav-text">Jdk中的外观模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.13.3.</span> <span class="nav-text">Mybatis中的外观模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%EF%BC%88-Bridge"><span class="nav-number">1.14.</span> <span class="nav-text">桥接模式（ Bridge )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-4"><span class="nav-number">1.14.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.14.2.</span> <span class="nav-text">Jdk中的桥接模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis-%E4%B8%AD%E7%9A%84%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.14.3.</span> <span class="nav-text">Mybatis 中的桥接模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F-Composite"><span class="nav-number">1.15.</span> <span class="nav-text">组合模式 ( Composite )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-5"><span class="nav-number">1.15.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.15.2.</span> <span class="nav-text">Jdk中的组合模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.15.3.</span> <span class="nav-text">Mybatis中的组合模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%BC%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%E4%B8%8E%E5%8C%BA%E5%88%AB"><span class="nav-number">1.15.4.</span> <span class="nav-text">模式之间的关系与区别</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%EF%BC%88-Strategy"><span class="nav-number">1.16.</span> <span class="nav-text">策略模式（ Strategy )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-6"><span class="nav-number">1.16.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.16.2.</span> <span class="nav-text">Jdk中的策略模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.16.3.</span> <span class="nav-text">Mybatis中的策略模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F%EF%BC%88-Template-Method"><span class="nav-number">1.17.</span> <span class="nav-text">模板方法模式（ Template Method )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-7"><span class="nav-number">1.17.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.17.2.</span> <span class="nav-text">Jdk中的模板方法模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.17.3.</span> <span class="nav-text">Mybatis中的模板方法模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%EF%BC%88-Observer"><span class="nav-number">1.18.</span> <span class="nav-text">观察者模式（ Observer )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-8"><span class="nav-number">1.18.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.18.2.</span> <span class="nav-text">Jdk中的观察者模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Spring%E4%B8%AD%E7%9A%84%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.18.3.</span> <span class="nav-text">Spring中的观察者模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F-Chain-of-Responsibility"><span class="nav-number">1.19.</span> <span class="nav-text">责任链模式 ( Chain of Responsibility )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-9"><span class="nav-number">1.19.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.19.2.</span> <span class="nav-text">Jdk中的责任链模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.19.3.</span> <span class="nav-text">Mybatis中的责任链模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F-Command"><span class="nav-number">1.20.</span> <span class="nav-text">命令模式  ( Command )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-10"><span class="nav-number">1.20.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.20.2.</span> <span class="nav-text">Jdk中的命令模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Activiti%E4%B8%AD%E7%9A%84%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F-%E4%B8%8E%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.20.3.</span> <span class="nav-text">Activiti中的命令模式(与责任链模式)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%EF%BC%88-State"><span class="nav-number">1.21.</span> <span class="nav-text">状态模式（ State )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-11"><span class="nav-number">1.21.1.</span> <span class="nav-text">角色</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%EF%BC%88-Prototype"><span class="nav-number">1.22.</span> <span class="nav-text">原型模式（ Prototype )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.22.1.</span> <span class="nav-text">Jdk中的原型模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%EF%BC%88-Flyweight"><span class="nav-number">1.23.</span> <span class="nav-text">享元模式（ Flyweight )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.23.1.</span> <span class="nav-text">Jdk中的享元模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%AD%90%E6%A8%A1%E5%BC%8F-Iterator"><span class="nav-number">1.24.</span> <span class="nav-text">迭代子模式  ( Iterator )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%AD%90%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.24.1.</span> <span class="nav-text">Jdk中的迭代子模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mybatis%E4%B8%AD%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%AD%90%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.24.2.</span> <span class="nav-text">Mybatis中的迭代子模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F-Memento"><span class="nav-number">1.25.</span> <span class="nav-text">备忘录模式  ( Memento )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.25.1.</span> <span class="nav-text">Jdk中的备忘录模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F-Mediator"><span class="nav-number">1.26.</span> <span class="nav-text">中介者模式  ( Mediator )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.26.1.</span> <span class="nav-text">Jdk中的中介者模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F-Interpreter"><span class="nav-number">1.27.</span> <span class="nav-text">解释器模式  ( Interpreter )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.27.1.</span> <span class="nav-text">Jdk中的解释器模式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F-Visitor"><span class="nav-number">1.28.</span> <span class="nav-text">访问者模式 ( Visitor )</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%92%E8%89%B2-12"><span class="nav-number">1.28.1.</span> <span class="nav-text">角色</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Jdk%E4%B8%AD%E7%9A%84%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">1.28.2.</span> <span class="nav-text">Jdk中的访问者模式</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Jerry Lee"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Jerry Lee</p>
  <div class="site-description" itemprop="description">Java coder</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sortbylist" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;sortbylist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry Lee</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
